"use strict";define(["common/touchslider/touchslider","common/touchguesture/touchguesture","common/pointerevents/pointerevents","common/svgicos/svgicos","site/pages/pages","site/panels/panels","site/popups/popups","./lang"],function(t,e,n,i,s,a,o,l){var r,c,f,h,u,d,y,m,v,w={appendCss:function(t,e){var n=document.createElement("link");return self.less&&!e?(n.rel="stylesheet/less",n.href=t+".less",less.sheets.push(n),less.refresh()):(n.rel="stylesheet",n.href=t+".css"),document.head.appendChild(n)},removeCss:function(t){t.remove(),"stylesheet/less"===t.rel&&(less.sheets.splice(less.sheets.indexOf(t),1),less.refresh())},makeSvg:function(t,e){var n="http://www.w3.org/2000/svg",i=document.createElementNS(n,"svg");return i.appendChild(document.createElementNS(n,"path")),t&&w.setSvgPath(i,t,e),i},setSvgPath:function(t,e,n){var s=w.makeSvg();i.hasOwnProperty(e)&&(e=i[e]),t.firstChild.setAttribute("d",e),s.style.position="absolute",s.style.bottom=s.style.right="100%",s.firstChild.setAttribute("d",e),document.body.appendChild(s);var a=s.firstChild.getBBox();s.remove(),2==n?(a.width+=2*a.x,a.x=0,a.height+=2*a.y,a.y=0):n&&(a.width>a.height?(a.y-=(a.width-a.height)/2,a.height=a.width):(a.x-=(a.height-a.width)/2,a.width=a.height)),t.setAttribute("viewBox",a.x+" "+a.y+" "+a.width+" "+a.height)},parseHash:function(t){var e={id:r,args:{}},n=(t=t.substr(1).replace(/[#?].*$/,"")).match(/[^=&]+(=[^&]*)?/g);if(n&&"!"===n[0].charAt(0)){var i=decodeURIComponent(n[0].substr(1));s.hasOwnProperty(i)&&(e.id=i);for(var a=1;a<n.length;a++)(i=n[a].match(/^([^=]+)(=)?(.+)?$/))&&(e.args[decodeURIComponent(i[1])]=i[2]?decodeURIComponent(i[3]||""):void 0)}return e},getDefaultBack:function(t){var e;if(t||(t=w.location),t.args.backHash)try{e=w.parseHash(t.args.backHash)}catch(l){}if(e)return e;var n=s[t.id].backLoc;if(s[t.id].back&&s[s[t.id].back]){e={id:s[t.id].back,args:{}};var i=s[s[t.id].back].alias?s[s[s[t.id].back].alias]:s[s[t.id].back];if(i.args)for(var a=0;a<i.args.length;a++)t.args.hasOwnProperty(i.args[a])&&(e.args[i.args[a]]=t.args[i.args[a]])}if(n&&e){for(var o in e.args)if(e.args[o]!==n.args[o])return e;return n}return n||e},isGoingback:function(t,e){var n=t;if(n!==e){if(e===r||n.length>e.length+1&&n.substr(0,e.length+1)===e+"-")return!0;for(;s[n].back;)if((n=s[n].back)===e)return!0;n=t.split("-");for(var i,a=e.split("-"),o=Math.min(n.length,a.length);i<o&&n[i]===a[i];)i++;if(i<Math.max(n.length,a.length)-1)return i<n.length-1&&n.splice(i+1),i<a.length-1&&a.splice(i+1),w.isGoingback(n.join("-"),a.join("-"))}},replaceLocation:function(t){w.location&&w.isSameLocation(t,w.location)?w.reloadPage():location.replace(w.buildHash(t))}};return document.documentElement.style.hasOwnProperty("animation")?(c="animationend",f="animationName",h="animationDuration"):(c="webkitAnimationEnd",f="webkitAnimationName",h="webkitAnimationDuration"),self.frameElement&&frameElement.kernel?self.Reflect?Reflect.setPrototypeOf(w,frameElement.kernel):w.__proto__=frameElement.kernel:(w.buildHash=function(t){var e="#!"+encodeURIComponent(t.id);for(var n in t.args)e+=void 0===t.args[n]?"&"+encodeURIComponent(n):"&"+encodeURIComponent(n)+"="+encodeURIComponent(t.args[n]);return e},w.isSameLocation=function(t,e){if(t.id===e.id&&Object.keys(t.args).length===Object.keys(e.args).length){for(var n in t.args){if(!e.args.hasOwnProperty(n))return!1;if(void 0===t.args[n]){if(t.args[n]!==e.args[n])return!1}else if(""+t.args[n]!=""+e.args[n])return!1}return!0}return!1},w.getLang=function(t){if(navigator.languages){for(var e=0;e<navigator.languages.length;e++)if(t.hasOwnProperty(navigator.languages[e]))return t[navigator.languages[e]]}else if(t.hasOwnProperty(navigator.language))return t[navigator.language];return t.en},function(){var t,e,n,i,s=document.head.querySelector("meta[name=viewport]"),a=s.content;function o(){var i=s.content.match(/initial-scale=([\d\.]+)/);i=i?+i[1]:1;var a=Math.round(innerWidth*i),r=Math.round(innerHeight*i);t===a&&e===r?n=requestAnimationFrame(o):(l(a,r),t=a,e=r,n=void 0)}function l(t,e,n){if(t&&e){var a=Math.min(t,e),o=a/i;o>1&&(o=Math.sqrt(o)),o=n?"user-scalable=no, width="+Math.round(t/o):"user-scalable=no, initial-scale="+(o=a/Math.round(a/o))+", maximum-scale="+o+", minimum-scale="+o,s.content!==o&&(s.content=o)}}w.setAutoScale=function(n){(i=n)>0?self.visualViewport?self.visualViewport.dispatchEvent(new Event("resize")):self.dispatchEvent(new Event("resize")):(s.content=a,t=e=void 0)},self.visualViewport?self.visualViewport.addEventListener("resize",function(){i>0&&l(Math.round(this.width*this.scale),Math.round(this.height*this.scale),!0)}):self.addEventListener("resize",function(){i>0&&(n&&cancelAnimationFrame(n),o())})}(),function(){var t="function"==typeof Symbol?Symbol("xEvents"):"xEvents";function e(e){this[t][e.type].locked=!0;for(var i=0;i<this[t][e.type].heap.length;i++)this[t][e.type].heap[i].call(this,e);for(this[t][e.type].locked=!1;this[t][e.type].stack.length;){if(this[t][e.type].stack[0])if("function"==typeof this[t][e.type].stack[0]){var s=this[t][e.type].heap.indexOf(this[t][e.type].stack[0]);s>=0&&this[t][e.type].heap.splice(s,1)}else this[t][e.type].heap.indexOf(this[t][e.type].stack[0][0])<0&&this[t][e.type].heap.push(this[t][e.type].stack[0][0]);else this[t][e.type].heap.splice(0);this[t][e.type].stack.shift()}n(this,e.type)}function n(e,n,i){!i&&e[t][n].heap.length||(delete e[t][n],e["on"+n]=null)}w.listeners={add:function(n,i,s){var a=0;return"function"==typeof s&&(n.hasOwnProperty(t)||(n[t]={}),n[t].hasOwnProperty(i)||(n[t][i]={stack:[],heap:[],locked:!1},n["on"+i]=e),n[t][i].locked?(n[t][i].stack.push([s]),a=2):n[t][i].heap.indexOf(s)<0&&(n[t][i].heap.push(s),a=1)),a},list:function(e,n){var i;if(n)i=e.hasOwnProperty(t)&&e[t].hasOwnProperty(n)?e[t][n].heap.slice(0):[];else if(i={},e.hasOwnProperty(t))for(var s in e[t])i[s]=e[t][s].heap.slice(0);return i},remove:function(e,i,s){var a=0;if(e.hasOwnProperty(t))if(i){if(e[t].hasOwnProperty(i))if(e[t][i].locked)e[t][i].stack.push(s),a=2;else if("function"==typeof s){var o=e[t][i].heap.indexOf(s);o>=0&&(e[t][i].heap.splice(o,1),n(e,i),a=1)}else n(e,i,!0),a=1}else{for(var l in e[t])e[t][l].locked?(e[t][l].stack.push(void 0),a=2):n(e,l,!0);a||(a=1)}return a}}}(),function(){function t(t){0===this.scrollTop?this.scrollTop=1:this.scrollTop+this.clientHeight===this.scrollHeight&&(this.scrollTop-=1)}w.scrollReload=function(t,e){var i,s,a,o,l=this,r=n(t,function(n){if("start"===n.type){if(0===r.pointers.length&&0===l.getScrollTop(t))return i=n.y,n.domEvent.view.addEventListener("scroll",c,!0),!0}else{if(o)return o=!1,!0;if(n.y>i){s||(s=!0,n.domEvent.view.removeEventListener("scroll",c,!0)),n.domEvent.preventDefault(),n.domEvent.stopPropagation(),a||((a=n.domEvent.view.document.createElement("span")).className="reloadHint",a.appendChild(l.makeSvg("sync-alt-solid",1)),t.appendChild(a));var f=a.offsetHeight||a.clientHeight,h=n.y-i-f;h<f?(a.classList.remove("pin"),a.style.top=17*h/16-17*Math.pow(h,2)/(32*f)+11*f/32+"px",a.style.opacity=(h+f)/(2*f),a.style.transform="rotate("+360*a.style.opacity+"deg)"):a.classList.contains("pin")||(a.style.top=f+"px",a.style.opacity=1,a.classList.add("pin"),a.style.transform="",navigator.vibrate&&navigator.vibrate(10))}else{if(n.y<i&&!s)return!0;a&&(a.remove(),a=void 0)}"end"!==n.type&&"cancel"!==n.type||(a&&(a.remove(),a.classList.contains("pin")&&("function"==typeof e?e():l.reloadPage()),a=void 0),s=!1)}});function c(e){e.target!==t&&(o=!0,this.removeEventListener("scroll",c,!0))}l.fixIosScrolling(t)},w.fixIosScrolling=function(e,n){"IOS"===browser.name&&(e.addEventListener("touchmove",C,{passive:!1}),n||(e.classList.add("iosScrollFix"),e.scrollTop=1,e.addEventListener("scroll",t)))},w.getScrollTop=function(t){return t.classList.contains("iosScrollFix")?t.scrollTop-1:t.scrollTop},w.getScrollHeight=function(t){return t.classList.contains("iosScrollFix")?t.scrollHeight-2:t.scrollHeight},w.setScrollTop=function(t,e){t.scrollTop=t.classList.contains("iosScrollFix")?e+1:e}}(),function(){var t,e=document.body.querySelector("#helper"),n=e.firstChild,i=e.lastChild;function s(t){i.src=t.img,"right"in t&&(i.style.right=t.right),"left"in t&&(i.style.left=t.left),"top"in t&&(i.style.top=t.top),"bottom"in t&&(i.style.bottom=t.bottom),"width"in t&&(i.style.width=t.width),"height"in t&&(i.style.height=t.height);for(var e=0;e<n.childNodes.length;e++){var s=n.childNodes[e];t.rows[e]?(s.style.height=t.rows[e],s.className="unflexable"):(s.style.height="auto",s.className="flexable")}for(var a=0;a<n.childNodes[1].childNodes.length;a++){var o=n.childNodes[1].childNodes[a];t.cells[a]?(o.style.width=t.cells[a],o.className="unflexable"):(o.style.width="auto",o.className="flexable")}}e.addEventListener("click",function n(){t.length>1?(t.shift(),"function"==typeof t[0]?(t[0](),n()):s(t[0])):e.style.display=""}),w.showHelper=function(n){s((t="Array"===dataType(n)?n:[n])[0]),e.style.display="block"}}(),function(){var t,e,i,s,o,l,r,c,f,h,u=document.querySelector("#panel"),d=u.querySelector(":scope>.content"),y=n(u,function(n){if("start"===n.type){if(!y.pointers.length&&!t)return d.querySelector(":scope>."+e),o=l=s=n.x,r=c=n.domEvent.timeStamp,n.domEvent.view.addEventListener("scroll",b,!0),!0}else{if(h)return h=!1,!0;if("move"===n.type)o=l,r=c,l=n.x,c=n.domEvent.timeStamp,!f&&Math.abs(l-s)>5&&(f=!0,n.domEvent.view.removeEventListener("scroll",b,!0)),f&&(n.domEvent.preventDefault(),d.style.transform="translateX("+Math.max(Math.min(l-s,0),-d.offsetWidth)+"px)");else{if(f){var i=(n.x-o)/(n.domEvent.timeStamp-r),a=4e3*Math.pow(i,2);i<0&&(a=-a),a=a+l-s<-d.offsetWidth/2,console.log(i),(!a||w.closePanel())&&a||"translateX(0px)"===d.style.transform||(d.style.transition="",d.style.transform="translateX(0px)",d.addEventListener("transitionend",v))}else n.domEvent.view.addEventListener("scroll",b,!0);h=f=!1}}});function m(){if("function"!=typeof a[e].onunload||!a[e].onunload())return a[e].status--,t=d.querySelector(":scope>."+e),d.style.transition=d.style.transform="",!0}function v(t){t.target===this&&(this.style.transition="none",console.log(1),this.removeEventListener(t.type,v))}function b(){h=!0,this.removeEventListener("scroll",b,!0)}w.openPanel=function(t,e){if(a.hasOwnProperty(t))return E("panel",t,function(n){"function"==typeof a[t].open?a[t].open(e):w.showPanel(t)}),!0},w.showPanel=function(n){var s=0;return a[n].status>1&&(t?(i=w.showPopup.bind(this,n),s=2):e?e===n?("function"!=typeof a[n].onload&&a[n].onload(),"function"==typeof a[n].onloadend&&a[n].onloadend(),s=1):m()&&(i=w.showPanel.bind(this,n),s=1):(a[n].status++,"fucntion"==typeof a[n].onload&&a[n].onload(),u.style.visibility="inherit",(t=d.querySelector(":scope>."+n)).style.right=t.style.top="auto",t.style.position="relative",d.style.width=t.offsetWidth+"px",d.style.transform="translateX(0px)",u.className=e=n)),s},w.closePanel=function(n){var s=0;return t?(i=w.closePanel.bind(this,n),s=2):e&&(!n||e===n||"Array"===dataType(n)&&n.indexOf(e)>=0)&&m()&&(s=1),s},w.getCurrentPanel=function(){return e},w.destroyPanel=function(t){if(2===a[t].status)return g(a[t],"panel",t),!0},d.addEventListener("transitionend",function(n){if(t&&n.target===this&&(this.style.transform?("function"==typeof a[e].onloadend&&a[e].onloadend(),a[e].status++,this.style.width="",this.style.transition="none",console.log(2)):("function"==typeof a[e].onunloadend&&a[e].onunloadend(),a[e].status--,t.style.position=t.style.right=t.style.top="",a[e].autoDestroy?g(a[e],"panel",e):document.activeElement&&t.contains(document.activeElement)&&document.activeElement.blur(),e=void 0,u.style.visibility=""),t=void 0,i)){var s=i;i=void 0,s()}})}(),function(){var t,e,n,i,s,a=document.body.querySelector("#popup"),r=a.querySelector(":scope>.header>.close"),f=a.querySelector(":scope>.header>.title").firstChild,h=a.querySelector(":scope>.header>.back");function u(i){t&&a.classList.remove(t),e=n=void 0,t=i,a.classList.add(t),f.data=o[i].title,document.body.classList.contains("hidePopupHeader")&&(document.title=f.data),h.style.display="none"}w.openPopup=function(e,n,i){if(o.hasOwnProperty(e))return E("popup",e,function(){"function"==typeof o[e].open?o[e].open(n,t&&i):w.showPopup(e,i)}),!0},w.showPopup=function(e,n){var l=0;if(o[e].status>1)if(i)s=w.showPopup.bind(this,e,n),l=2;else if(t){if(t===e)"function"==typeof o[e].onload&&o[e].onload(),"function"==typeof o[e].onloadend&&o[e].onloadend(),l=1;else if("function"!=typeof o[t].onunload||!o[t].onunload()){var r=a.querySelector(":scope>.content>."+t);o[t].status--,o[e].status++,"function"==typeof o[e].onload&&o[e].onload(n),b(a.querySelector(":scope>.content>."+e),r,n,function(){var a=t;if(i=!1,u(e),"function"==typeof o[a].onunloadend&&o[a].onunloadend(),o[a].status--,o[a].autoDestroy?g(o[a],"popup",a):document.activeElement&&r.contains(document.activeElement)&&document.activeElement.blur(),"function"==typeof o[t].onloadend&&o[t].onloadend(n),o[e].status++,"function"==typeof s){var l=s;s=void 0,l()}}),i=e,l=1}}else{o[e].status++,"fucntion"==typeof o[e].onload&&o[e].onload();var c=a.querySelector(":scope>.content>."+e);c.style.left=0,c.style.visibility="inherit",a.classList.add("in"),i=e,"function"==typeof w.popupEvents.onshow&&w.popupEvents.onshow({type:"show",id:e}),u(e),w.hideReadable(),l=1}return l},w.closePopup=function(e){var n=0;return i?(s=w.closePopup.bind(this,e),n=2):!t||e&&t!==e&&!("Array"===dataType(e)&&e.indexOf(t)>=0)||"function"==typeof o[t].onunload&&o[t].onunload()||(o[t].status--,a.classList.remove("in"),a.classList.add("out"),i=!0,"function"==typeof w.popupEvents.onhide&&w.popupEvents.onhide({type:"hide",id:t}),n=1),n},w.getCurrentPopup=function(){return t},w.setPopupBack=function(t,i){a.classList.contains("in")&&(t?(h.lastChild.data="function"!=typeof t&&o[t].title?o[t].title:l.back,e=t,h.style.display="",n=i):h.style.display="none")},w.setPopupTitle=function(e,n){n?o.hasOwnProperty(n)&&(o[n].title=e,t===n&&(f.data=e,document.body.classList.contains("hidePopupHeader")&&(document.title=f.data))):a.classList.contains("in")&&(f.data=e,document.body.classList.contains("hidePopupHeader")&&(document.title=f.data))},w.destroyPopup=function(t){if(2===o[t].status)return g(o[t],"popup",t),!0},w.popupEvents={},r.appendChild(w.makeSvg("times-light",1)),r.addEventListener("click",function(){w.closePopup()}),h.insertBefore(w.makeSvg("angle-left-light",1),h.firstChild),h.addEventListener("click",function(t){"function"==typeof e?e(n):w.openPopup(e,n,!0)}),a.addEventListener(c,function(e){if(e.target===this){if(i=!1,this.classList.contains("out")){this.classList.remove("out");var n=a.querySelector(":scope>.content>."+t);n.style.left=n.style.visibility="","function"==typeof o[t].onunloadend&&o[t].onunloadend(),o[t].status--,o[t].autoDestroy?g(o[t],"popup",t):document.activeElement&&n.contains(document.activeElement)&&document.activeElement.blur(),a.classList.remove(t),"function"==typeof w.popupEvents.onhideend&&w.popupEvents.onhideend({type:"hideend",id:t}),t=void 0}else"function"==typeof w.popupEvents.onshowend&&w.popupEvents.onshowend({type:"showend",id:t}),"function"==typeof o[t].onloadend&&o[t].onloadend(),o[t].status++;if("function"==typeof s){var l=s;s=void 0,l()}}})}(),y=document.body.querySelector("#readable"),m=y.querySelector(":scope>.close"),v=y.querySelector(":scope>.content"),w.fixIosScrolling(v),d=v.className,w.showReadable=function(t,e,n){"string"==typeof t?v.innerHTML=t:v.appendChild(t),v.className=n?d+" "+n:d,y.className="in",u=e},w.hideReadable=function(){y.classList.contains("in")&&(y.classList.remove("in"),y.classList.add("out"),"function"==typeof u&&u())},w.showForeign=function(t,e){w.showReadable(`<iframe frameborder="no" scrolling="${"IOS"===browser.name?"no":"auto"}" sandbox="allow-same-origin allow-forms allow-scripts allow-modals" src="${t}"></iframe>`,e,"foreign")},m.appendChild(w.makeSvg("times-solid",1)),m.addEventListener("click",w.hideReadable),y.addEventListener(c,function(t){if(t.target===this&&this.classList.contains("out")){for(;v.childNodes.length>0;)v.firstChild.remove();this.className=""}}),function(){var n,i,s=0,a=[],o={},r=document.body.querySelector("#loading"),c=document.body.querySelector("#hint"),f=document.body.querySelector("#dialog"),h=f.querySelector(":scope>div"),u=h.querySelector(":scope>.content"),d=h.querySelector(":scope>.close"),y=h.querySelector(":scope>.btns>.yes"),m=h.querySelector(":scope>.btns>.no"),v=document.body.querySelector("#sliderView"),g=v.querySelector(":scope>.close"),E=t(v.querySelector(":scope>.content")),b=document.body.querySelector("#photoView"),L=b.querySelector(":scope>.close"),S=b.querySelector(":scope>img"),C=b.querySelector(":scope>.actions"),q=e(b);function p(){w.closeDialog()}function M(t,e,n,s){"inherit"===f.style.visibility?a.push([t,e,n,s]):(h.className=t,"alert"===t?"Array"===dataType(e)?(u.textContent=e[0],y.firstChild.data=e[1]):(u.textContent=e,y.firstChild.data=l.ok):"confirm"===t?"Array"===dataType(e)?(u.textContent=e[0],y.firstChild.data=e[1],m.firstChild.data=e[2]):(u.textContent=e,y.firstChild.data=l.yes,m.firstChild.data=l.no):"string"==typeof e?u.innerHTML=e:u.appendChild(e),f.style.visibility="inherit",i=n,"function"==typeof s&&s())}function T(){S.style.width=o.w+"px",S.style.height=o.h+"px",S.style.left=o.l+"px",S.style.top=o.t+"px"}function O(){o.ww=innerWidth,o.wh=innerHeight,o.wr=o.ww/o.wh,o.ow=S.naturalWidth,o.oh=S.naturalHeight,o.r=o.ow/o.oh,o.ow>o.ww||o.oh>o.wh?o.r>o.wr?(o.z=o.mz=o.ww/o.ow,o.l=0,o.w=o.ww,o.h=o.w/o.r,o.t=(o.wh-o.h)/2):(o.z=o.mz=o.wh/o.oh,o.t=0,o.h=o.wh,o.w=o.h*o.r,o.l=(o.ww-o.w)/2):(o.z=o.mz=1,o.w=o.ow,o.h=o.oh,o.l=(o.ww-o.w)/2,o.t=(o.wh-o.h)/2),T()}q.onzoomstart=function t(e){var n=e.x,i=e.y,s=o.z;this.onzoomstart=null;this.onzoomchange=a;this.onzoomend=function(e){a.call(this,e),this.onzoomchange=this.zoomend=null,this.onzoomstart=t};function a(t){var e=Math.max(Math.min(t.zoom*s,1),o.mz);e!==o.z&&(o.w=o.ow*e,o.h=o.oh*e,o.l=o.w>o.ww?Math.min(Math.max(n+(o.l-n)*e/o.z,o.ww-o.w),0):(o.ww-o.w)/2,o.t=o.h>o.wh?Math.min(Math.max(i+(o.t-i)*e/o.z,o.wh-o.h),0):(o.wh-o.h)/2,o.z=e,T())}},q.ondragstart=function t(e){var n=e.x,i=e.y,s=o.l,a=o.t;q.ondragmove=l;q.ondragend=function(e){l.call(this,e),this.ondragmove=this.ondragend=null,this.ondragstart=t};function l(t){o.w>o.ww&&(o.l=Math.min(Math.max(s+t.x-n,o.ww-o.w),0)),o.h>o.wh&&(o.t=Math.min(Math.max(a+t.y-i,o.wh-o.h),0)),T()}},w.showPhotoView=function(t,e,n){for(S.src=t;C.childNodes.length;)C.firstChild.remove();if("function"==typeof n&&e&&e.length){for(var i=0;i<e.length;i++){var s=document.createElement("a");s.href="javascript:;",s.appendChild(document.createTextNode(e[i])),s.addEventListener("click",n.bind(w,i)),C.appendChild(s)}C.style.display=""}else C.style.display="none"},w.hidePhotoView=function(){S.src="about:blank"},S.addEventListener("load",function(){b.style.visibility="inherit",self.addEventListener("resize",O),O()}),S.addEventListener("error",function(){b.style.visibility="",self.removeEventListener("resize",O)}),w.showSliderView=function(t,e,n){v.className=n||"";for(var i=0;i<t.length;i++)E.add(t[i]);e&&E.slideTo(e,!0)},w.hideSliderView=function(){E.clear()},w.alert=function(t,e,n){M("alert",t,e,n)},w.confirm=function(t,e,n){M("confirm",t,e,n)},w.htmlDialog=function(t,e,n,i){M(e||"",t,n,i)},w.closeDialog=function(t){if("function"==typeof i){var e=i;i=void 0,e(t)}for(f.style.visibility="";u.childNodes.length;)u.lastChild.remove();a.length&&M.apply(void 0,a.shift())},w.showLoading=function(t){r.querySelector(":scope>div").lastChild.data=t||l.loading,0===s&&(r.style.visibility="inherit"),s++},w.hideLoading=function(){s>0&&0===--s&&(r.style.visibility="","function"==typeof w.dialogEvents.onloaded&&w.dialogEvents.onloaded({type:"loaded"}))},w.isLoading=function(){return s>0},w.hint=function(t,e){c.querySelector(":scope>.text").firstChild.data=t,n?clearTimeout(n):c.style.opacity=1,n=setTimeout(function(){c.style.opacity="",n=void 0},e||5e3)},w.dialogEvents={},E.onchange=function(){var t="";if(this.children.length){if(this.children.length>1)for(var e=0;e<this.children.length;e++)t+=e===this.current?"●":"○";v.style.visibility="inherit"}else v.style.visibility="";v.querySelector(":scope>.nav").firstChild.data=t},d.appendChild(w.makeSvg("times-light",1)),d.addEventListener("click",p),m.addEventListener("click",p),y.addEventListener("click",w.closeDialog),g.appendChild(w.makeSvg("times-solid",1)),L.appendChild(g.firstChild.cloneNode(!0)),g.addEventListener("click",w.hideSliderView),L.addEventListener("click",w.hidePhotoView)}()),function(){var t,e,n,i,a,o=location.pathname,c=document.body.querySelector("#page"),f=c.querySelector(":scope>.navMenu"),u=c.querySelector(":scope>.header>.title").firstChild,d=c.querySelector(":scope>.header>.back"),y=c.querySelector(":scope>.header>.leftMenuBtn"),m=c.querySelector(":scope>.header>.rightMenuBtn");try{sessionStorage.setItem(0,0),sessionStorage.removeItem(0)}catch(O){Storage.prototype.setItem=function(){}}function v(t){t&&(w.listeners.remove(this,t.type,v),setTimeout(function(){document.body.querySelector("#popup").style[h]=""},400)),document.body.addEventListener("transitionend",L),document.documentElement.classList.remove("loading")}function L(t){t.target===this&&(this.removeEventListener(t.type,L),this.style.transition="")}function S(t){for(;f.childNodes.length;)f.firstChild.remove();for(var e in a=t)if(s.hasOwnProperty(e)){var n=f.appendChild(document.createElement("a"));n.className=e,n.href="#!"+e,RegExp("^"+e+"(?:-|$)").test(w.location.id)?(n.classList.add("selected"),a[e]&&n.appendChild(w.makeSvg("string"==typeof a[e]?a[e]:a[e][1],1))):a[e]&&n.appendChild(w.makeSvg("string"==typeof a[e]?a[e]:a[e][0],1)),n.appendChild(document.createTextNode(s[e].alias?s[e].title||s[s[e].alias].title:s[e].title))}}function C(){var e=w.parseHash(location.hash);w.isSameLocation(e,w.location)||(w.lastLocation=w.location,w.location=e,!s[w.location.id].back||w.lastLocation.id!==s[w.location.id].back&&s[w.lastLocation.id].alias!==s[w.location.id].back?s[w.lastLocation.id].backLoc&&(w.location.id===s[w.lastLocation.id].back||s[w.location.id].alias&&s[w.location.id].alias===s[w.lastLocation.id].back)&&(delete s[w.lastLocation.id].backLoc,delete t[w.lastLocation.id],sessionStorage.setItem(o,toJsex(t))):(t[w.location.id]=s[w.location.id].backLoc=w.lastLocation,sessionStorage.setItem(o,toJsex(t))),q())}function q(){var t=w.location.id;if(w.hasOwnProperty("lastLocation")){var o=t.replace(/-.*$/,""),r=w.lastLocation.id.replace(/-.*$/,"");if(o!==r){var h=f.querySelector(":scope>a."+o);h&&(h.classList.add("selected"),a[o]&&"string"!=typeof a[o]&&w.setSvgPath(h.firstChild,a[o][1],1)),(h=f.querySelector(":scope>a."+r))&&(h.classList.remove("selected"),a[r]&&"string"!=typeof a[r]&&w.setSvgPath(h.firstChild,a[r][0],1))}M()}"function"==typeof w.pageEvents.onroute&&w.pageEvents.onroute({type:"route"}),E("page",t,function(a){if(n)i=!0;else{var o;if(t===e)T();else{var r=s[t].alias?s[t].alias:t,f=s[t].title||s[r].title;for(c.classList.add(t),u.data=f,(document.body.classList.contains("clean")||document.body.classList.contains("hidePageHeader"))&&(document.title=f),self.frameElement&&frameElement.kernel&&"page"===w.getCurrentPopup()&&w.setPopupTitle(f);m.childNodes.length;)m.firstChild.remove();for(m.removeAttribute("href");y.childNodes.length;)y.firstChild.remove();y.removeAttribute("href"),s[r].rightMenuContent||s[r].onrightmenuclick?("string"==typeof s[r].rightMenuContent?m.innerHTML=s[r].rightMenuContent:s[r].rightMenuContent&&m.appendChild(s[r].rightMenuContent),"function"==typeof s[r].onrightmenuclick?m.href="javascript:;":s[r].onrightmenuclick&&(m.href=s[r].onrightmenuclick),m.style.display=""):m.style.display="none",s[r].leftMenuContent||s[r].onleftmenuclick?("string"==typeof s[r].leftMenuContent?y.innerHTML=s[r].leftMenuContent:s[r].leftMenuContent&&y.appendChild(s[r].leftMenuContent),"function"==typeof s[r].onleftmenuclick?y.href="javascript:;":s[r].onleftmenuclick&&(y.href=s[r].onleftmenuclick),y.style.display=""):y.style.display="none";var h=w.getDefaultBack();if(h){var v=s[h.id].title;!v&&s[h.id].alias&&(v=s[s[h.id].alias].title),d.lastChild.data=v||l.back,d.href=w.buildHash(h),d.style.display=""}else d.style.display="none";var E=c.querySelector(":scope>.content>."+r);if(e){c.classList.remove(e);var L=s[e].alias?s[e].alias:e,S=e;if(e=t,r===L)T(o=!0);else{n=!0;var C=c.querySelector(":scope>.content>."+L),p=w.lastLocation&&w.lastLocation.args.backHash===location.hash||w.isGoingback(S,t);o=!p||a,b(E,C,p,function(){n=!1,"function"==typeof s[L].onunloadend&&s[L].onunloadend(),s[L].status--,s[L].autoDestroy?g(s[L],"page",L):document.activeElement&&C.contains(document.activeElement)&&document.activeElement.blur(),"function"==typeof s[r].onloadend&&s[r].onloadend(o),s[r].status++,i&&(i=!1,E.style.visibility="inherit",q())}),"function"==typeof s[L].onunload&&s[L].onunload(),s[L].status--,s[r].status++,"function"==typeof s[r].onload&&s[r].onload(o)}}else o=!0,e=t,E.style.left=0,E.style.visibility="inherit",T(o)}"function"==typeof w.pageEvents.onrouteend&&w.pageEvents.onrouteend({type:"routeend",force:o})}})}function p(t,n){var i=s[e].alias?s[s[e].alias]:s[e];(!t||t===e||"Array"===dataType(t)&&t.indexOf(e)>=0)&&(n||M(),"function"==typeof i.onload&&i.onload(!0),"function"==typeof i.onloadend&&i.onloadend(!0))}function M(){self.frameElement&&frameElement.kernel||(w.hideReadable(),w.closePopup())}function T(t){var n=s[e].alias?s[s[e].alias]:s[e];n.status<3&&n.status++,"function"==typeof n.onload&&n.onload(t),"function"==typeof n.onloadend&&n.onloadend(t),n.status<4&&n.status++}w.init=function(e){for(var n,i={},a=0;a<e.length;a++){var l=void 0,c=void 0;"string"==typeof e[a]?l=e[a]:(l=e[a].id,c=e[a].ico),s.hasOwnProperty(l)&&(n||(n=l),i[l]=c)}if(n)if(r){if(S(i),r!==n){var f=r;if(r=n,w.location.id===f)return C(),!0}}else{for(var u in r=n,w.location=w.parseHash(location.hash),w.location.args.ui&&w.location.args.ui.split(",").forEach(function(t){document.body.classList.add(t)}),(t=sessionStorage.getItem(o))&&(t=t.parseJsex())&&(t=t.value),t||(t={}),t)s.hasOwnProperty(u)&&(s[u].backLoc=t[u]);var d;if(self.addEventListener("hashchange",C),S(i),q(),w.location.args.hasOwnProperty("autoPopup"))w.location.args.hasOwnProperty("autoPopupArg")&&(d=w.location.args.autoPopupArg.parseJsex())&&(d=d.value),w.openPopup(w.location.args.autoPopup,d)?(document.body.querySelector("#popup").style[h]="1ms",w.listeners.add(w.popupEvents,"showend",v)):v();else v()}},w.reloadPage=function(t,e){var n;w.isLoading()?(n=w.location,w.listeners.add(w.dialogEvents,"loaded",function i(s){w.listeners.remove(this,s.type,i);n===w.location&&p(t,e)})):p(t,e)},w.destroyPage=function(t){if(2===s[t].status)return g(s[t],"page",t),!0},w.pageEvents={},d.insertBefore(w.makeSvg("angle-left-light",1),d.firstChild),m.addEventListener("click",function(t){var n=s[s[e].alias?s[e].alias:e];"function"==typeof n.onrightmenuclick&&n.onrightmenuclick()}),y.addEventListener("click",function(t){var n=s[s[e].alias?s[e].alias:e];"function"==typeof n.onleftmenuclick&&n.onleftmenuclick()})}(),l=w.getLang(l),self.addEventListener("contextmenu","Firefox"===browser.name?C:S),self.addEventListener("dragstart",S),"IOS"===browser.name&&(self.addEventListener("gesturestart",S,{passive:!1}),self.addEventListener("touchmove",S,{passive:!1})),w;function g(t,e,n){var i=document.body.querySelector("#"+e+">.content>."+n);if(i&&("function"==typeof t.ondestroy&&t.ondestroy(),i.remove(),t.js)){var s=e+"/"+n+"/"+n;require.defined(s)&&(i=require(s),require.undef(s),i&&(self.Reflect?Reflect.setPrototypeOf(t,Object.prototype):t.__proto__=Object.prototype))}t.css&&t.css.href&&(w.removeCss(t.css),t.css=!0),delete t.status}function E(t,e,n){var i,r;if("panel"===t?i=a[e]:"popup"===t?i=o[e]:(i=s[e]).alias&&(e=i.alias,i=s[i.alias]),i.status>1)n();else if(!i.status){var f=function(s){var a=document.body.querySelector("#"+t+">.content");a.insertAdjacentHTML("beforeEnd",'<div class="'+e+'">'+s+"</div>");var o=a.lastChild;if("panel"!==t&&o.addEventListener(c,L),i.js){w.showLoading(),o.style.opacity=0,o.style.transition="opacity 400ms ease-in-out",o.addEventListener("transitionend",function t(e){e.target===this&&(this.removeEventListener(e.type,t),this.style.transition="")}),w.listeners.add(w.dialogEvents,"loaded",function t(e){w.listeners.remove(this,e.type,t);o.style.opacity=""});var l=r+e;require([l],function(t){t&&(self.Reflect?Reflect.setPrototypeOf(i,t):i.__proto__=t),i.status++,n(!0),w.hideLoading()},BUILD&&function(n){g(i,t,e),n.requireType&&"scripterror"!==n.requireType&&"nodefine"!==n.requireType||n.xhr&&404!==n.xhr.status?h(l,n.message):u(),w.hideLoading()})}else i.status++,n(!0)},h=function(e,n){w.alert(l.error.replace("${res}",e)+n,"page"===t?function(){history.back()}:void 0)},u=function(){"page"===t?location.reload():w.confirm(l.update,function(t){t&&location.reload()})};i.status=1,r=t+"/"+e+"/";var d=require.toUrl(r);if(i.css&&(i.css=w.appendCss(d+e)),i.html){var y=d+e+".html";fetch(y).then(function(n){if(n.ok)return n.text().then(f);g(i,t,e),BUILD&&404===n.status?u():h(y,n.status)},function(t){return h(y,t.message)}).then(w.hideLoading),w.showLoading()}else f("")}}function b(t,e,n,i){t.style.visibility="inherit",n?(e.style[f]="viewTransR1",t.style[f]="viewTransR2"):(e.style[f]="viewTransL1",t.style[f]="viewTransL2"),t.addEventListener(c,function t(e){e.target===this&&(this.removeEventListener(e.type,t),i())})}function L(t){t.target===this&&("1"===this.style[f].substr(this.style[f].length-1)?this.style.left=this.style.visibility="":this.style.left=0,this.style[f]="")}function S(t){t.preventDefault()}function C(t){t.stopPropagation()}});